## This is just a work in progress hack of 'query' attempting to get it in line with CQL. Needs much more work and validation

paths:
  /search:
    get:
      parameters:
        - $ref: '#/components/parameters/filter'
components:
  parameters:
    filter:
      name: filter
      in: query
      description: Filter for properties in items. Uses OGC's Common Query Language (CQL) text (cql-text) from part 3 of OGC API - Features.
      required: false
      schema:
        type: string
      style: form
      explode: false
    filter-lang:
      name: filter-lang
      in: query
      required: false
      schema:
        type: string
        enum:
          - 'cql-text'
          - 'cql-json'
        default: "cql-text"
      style: form
  schemas:
    searchBody:
      allOf:
        - $ref: '#/components/schemas/queryFilter'
    queryFilter:
      type: object
      description: Filter for properties in items. Uses OGC's Common Query Language (CQL) JSON (cql-json) from part 3 of OGC API - Features.
      properties:
        filter:
          $ref: '#/components/schemas/filter'
    filter:
      type: object
      description: Filter for properties in items. Uses OGC's Common Query Language (CQL) JSON (cql-json) from part 3 of OGC API - Features.
      additionalProperties:
        $ref: '#/components/schemas/filterProp'
      example:
        and:
          - lt: 
              property: cloud_cover
              value: 10
          - eq: 
              property: platform
              value: 'landsat8'
          - like:
              property: pl:item_type
              value: 'PSScene%'
          - in: 
              property: gsd
              value:
                - 10
                - 15
                - 20
    filterProp:
      description: Apply filter operations to a specific property
      anyOf:
        - description: if the object doesn't contain any of the operators, it is equivalent to using the equals operator
        - type: object
          description: Match using an operator
          properties:
            eq:
              description: Find items with a property that is equal to the specified value. For strings, a case-insensitive comparison must be performed.
       